import{a as e}from"./vendor-http-CtpuQClY.js";import{d as t,r as a,p as r,c as s,b as l,e as i,j as o,z as n,A as d,B as c,f as u,F as p,l as g,g as x,m as y,C as v,o as b,u as m,k,D as f,x as h}from"./vendor-vue-21xXbNRb.js";import{_ as w,a as _}from"./feature-analytics-Bl__O72l.js";import"./vendor-charts-m3kAu5OU.js";const z={class:"space-y-6"},C={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},j={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},P={class:"md:col-span-2"},L={class:"relative"},S={class:"flex flex-wrap gap-2 mt-4"},B=["onClick"],I={class:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200"},N={class:"text-sm text-gray-600"},O={key:0,class:"grid grid-cols-2 md:grid-cols-5 gap-4"},M=["onClick"],$={class:"text-center"},K={class:"text-2xl mb-2"},D={class:"font-semibold text-gray-900"},F={class:"text-sm text-gray-600"},W={class:"text-xs text-purple-600 mt-1"},A={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Z={key:2,class:"text-center py-12"},E={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},T=["onClick"],V={class:"p-6 pb-4"},R={class:"flex items-start justify-between mb-3"},U={class:"font-bold text-lg text-gray-900 leading-tight"},q={class:"text-right ml-4"},G={class:"text-lg font-bold text-purple-600"},J={class:"text-xs text-gray-500"},H={class:"flex items-center justify-between mb-3"},Q={class:"flex items-center space-x-3"},X={class:"flex items-center"},Y={class:"text-green-600 font-medium"},ee={class:"flex items-center"},te={class:"text-blue-600 font-medium"},ae={class:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded"},re={class:"text-sm text-gray-600 mb-4 line-clamp-2"},se={class:"flex flex-wrap gap-1 mb-4"},le={key:0,class:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs"},ie={class:"px-6 py-4 bg-gray-50 border-t border-gray-100"},oe={class:"flex items-center justify-between"},ne={class:"text-sm text-gray-600"},de={class:"flex space-x-2"},ce=["onClick"],ue=["onClick"],pe=w(t({__name:"RecipeGrid",props:{recipes:{},categories:{},loading:{type:Boolean}},emits:["select-recipe","order-recipe"],setup(e){const t=e,b=a(""),m=a(""),k=a(""),f=a([]),h=[{id:"High-Protein",name:"Wysokobiałkowe",icon:"💪"},{id:"Detox",name:"Detoks",icon:"🌿"},{id:"Vegan",name:"Vegan",icon:"🌱"},{id:"Anti-inflammatory",name:"Przeciwzapalne",icon:"🔥"},{id:"Energy-Boost",name:"Energia",icon:"⚡"},{id:"Stress-Relief",name:"Antystres",icon:"🧘"}],w=r((()=>b.value||m.value||k.value||f.value.length>0)),_=r((()=>{let e=[...t.recipes];if(b.value){const t=b.value.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.tags&&e.tags.some((e=>e.toLowerCase().includes(t)))))}return m.value&&(e=e.filter((e=>e.category===m.value))),k.value&&(e=e.filter((e=>{const t=e.price;switch(k.value){case"0-15":return t<=15;case"15-20":return t>15&&t<=20;case"20-25":return t>20&&t<=25;case"25+":return t>25;default:return!0}}))),f.value.length>0&&(e=e.filter((e=>f.value.some((t=>e.tags&&e.tags.includes(t)))))),e})),pe=()=>{b.value="",m.value="",k.value="",f.value=[]},ge=e=>({breakfast:"🌅",lunch:"🌞",dinner:"🌙",snacks:"🥨",specialty:"🎯"}[e]||"🍽️"),xe=e=>({breakfast:"Śniadania",lunch:"Obiady",dinner:"Kolacje",snacks:"Przekąski",specialty:"Specjalistyczne"}[e]||"Przepisy");return(e,t)=>(l(),s("div",z,[i("div",C,[i("div",j,[i("div",P,[i("div",L,[n(i("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),type:"text",placeholder:"🔍 Szukaj przepisu...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[d,b.value]]),t[3]||(t[3]=i("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[i("span",{class:"text-gray-400"},"🔍")],-1))])]),i("div",null,[n(i("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>m.value=e),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},t[4]||(t[4]=[u('<option value="" data-v-64ce49ab>🍽️ Wszystkie kategorie</option><option value="breakfast" data-v-64ce49ab>🌅 Śniadania</option><option value="lunch" data-v-64ce49ab>🌞 Obiady</option><option value="dinner" data-v-64ce49ab>🌙 Kolacje</option><option value="snacks" data-v-64ce49ab>🥨 Przekąski</option><option value="specialty" data-v-64ce49ab>🎯 Specjalistyczne</option>',6)]),512),[[c,m.value]])]),i("div",null,[n(i("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>k.value=e),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},t[5]||(t[5]=[u('<option value="" data-v-64ce49ab>💰 Wszystkie ceny</option><option value="0-15" data-v-64ce49ab>💰 0-15 PLN</option><option value="15-20" data-v-64ce49ab>💰 15-20 PLN</option><option value="20-25" data-v-64ce49ab>💰 20-25 PLN</option><option value="25+" data-v-64ce49ab>💰 25+ PLN</option>',5)]),512),[[c,k.value]])])]),i("div",S,[(l(),s(p,null,g(h,(e=>i("button",{key:e.id,onClick:t=>(e=>{const t=f.value.indexOf(e);-1===t?f.value.push(e):f.value.splice(t,1)})(e.id),class:x(["px-3 py-1 rounded-full text-sm font-medium transition-all duration-200",f.value.includes(e.id)?"bg-purple-100 text-purple-700 border border-purple-300":"bg-gray-100 text-gray-600 border border-gray-300 hover:bg-purple-50"])},y(e.icon)+" "+y(e.name),11,B))),64))]),i("div",I,[i("span",N," Znaleziono "+y(_.value.length)+" z "+y(e.recipes.length)+" przepisów ",1),i("button",{onClick:pe,class:"text-sm text-purple-600 hover:text-purple-700 font-medium"}," 🔄 Wyczyść filtry ")])]),w.value?o("",!0):(l(),s("div",O,[(l(!0),s(p,null,g(e.categories,((e,t)=>(l(),s("div",{key:t,onClick:e=>m.value=t,class:"bg-white rounded-lg border border-gray-200 p-4 hover:border-purple-300 hover:bg-purple-50 transition-all duration-200 cursor-pointer"},[i("div",$,[i("div",K,y(ge(t)),1),i("div",D,y(xe(t)),1),i("div",F,y(e.count)+" przepisów",1),i("div",W,y(e.price_range.min.toFixed(0))+"-"+y(e.price_range.max.toFixed(0))+" PLN ",1)])],8,M)))),128))])),e.loading?(l(),s("div",A,[(l(),s(p,null,g(6,(e=>i("div",{key:e,class:"bg-gray-100 rounded-xl p-6 animate-pulse"},t[6]||(t[6]=[i("div",{class:"h-4 bg-gray-300 rounded mb-4"},null,-1),i("div",{class:"h-3 bg-gray-300 rounded mb-2"},null,-1),i("div",{class:"h-3 bg-gray-300 rounded mb-4"},null,-1),i("div",{class:"h-8 bg-gray-300 rounded"},null,-1)])))),64))])):0===_.value.length?(l(),s("div",Z,t[7]||(t[7]=[i("div",{class:"text-6xl mb-4"},"🤔",-1),i("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Brak przepisów",-1),i("p",{class:"text-gray-600"},"Spróbuj zmienić filtry lub wyszukiwanie",-1)]))):(l(),s("div",E,[(l(!0),s(p,null,g(_.value,(t=>(l(),s("div",{key:t.id,class:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:border-purple-300 hover:shadow-lg transition-all duration-200 cursor-pointer",onClick:a=>e.$emit("select-recipe",t)},[i("div",V,[i("div",R,[i("h3",U,y(t.name),1),i("div",q,[i("div",G,y(t.price.toFixed(2))+"zł",1),i("div",J,"⏱️ "+y(t.prep_time),1)])]),i("div",H,[i("div",Q,[i("div",X,[i("span",Y,"💚 "+y(t.health_score)+"/100",1)]),i("div",ee,[i("span",te,"🍽️ "+y(t.difficulty),1)])]),i("div",ae,y(xe(t.category)),1)]),i("p",re,y(t.description),1),i("div",se,[(l(!0),s(p,null,g(t.tags.slice(0,3),(e=>(l(),s("span",{key:e,class:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium"},y(e),1)))),128)),t.tags.length>3?(l(),s("span",le," +"+y(t.tags.length-3)+" więcej ",1)):o("",!0)])]),i("div",ie,[i("div",oe,[i("div",ne," 🥄 "+y(t.ingredients?t.ingredients.length:0)+" składników ",1),i("div",de,[i("button",{onClick:v((a=>e.$emit("select-recipe",t)),["stop"]),class:"px-3 py-1 bg-purple-100 text-purple-700 rounded-lg text-sm font-medium hover:bg-purple-200 transition-colors duration-200"}," 👁️ Szczegóły ",8,ce),i("button",{onClick:v((a=>e.$emit("order-recipe",t)),["stop"]),class:"px-3 py-1 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors duration-200"}," 🛒 Zamów ",8,ue)])])])],8,T)))),128))]))]))}}),[["__scopeId","data-v-64ce49ab"]]),ge={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},xe={class:"p-4 lg:p-6 border-b border-gray-200 dark:border-gray-700"},ye={class:"flex items-center justify-between mb-4"},ve={class:"flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1"},be={class:"grid grid-cols-3 gap-4 text-center"},me={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3"},ke={class:"text-lg font-semibold text-gray-900 dark:text-white"},fe={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3"},he={class:"text-lg font-semibold text-gray-900 dark:text-white"},we={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3"},_e={class:"text-lg font-semibold text-gray-900 dark:text-white"},ze={class:"p-4 lg:p-6"},Ce={key:0,class:"space-y-4"},je={key:1},Pe={key:0,class:"space-y-3"},Le=["onClick"],Se={class:"flex items-center justify-between mb-2"},Be={class:"flex items-center"},Ie={class:"w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-lg flex items-center justify-center mr-3"},Ne={class:"text-white text-lg"},Oe={class:"font-medium text-gray-900 dark:text-white group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors"},Me={class:"text-xs text-gray-500 dark:text-gray-400 capitalize"},$e=["onClick"],Ke={class:"flex items-center justify-between text-sm"},De={class:"flex items-center space-x-3"},Fe={class:"text-green-600 dark:text-green-400 font-semibold"},We={class:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 text-xs rounded"},Ae={class:"text-xs text-gray-500 dark:text-gray-400"},Ze={class:"text-xs text-gray-400 dark:text-gray-500 mt-2"},Ee={key:1,class:"text-center py-8"},Te={key:2},Ve={class:"flex flex-wrap gap-2 mb-4"},Re=["onClick"],Ue={key:0,class:"space-y-3"},qe=["onClick"],Ge={class:"flex items-center justify-between mb-2"},Je={class:"flex items-center"},He={class:"w-10 h-10 bg-gradient-to-br from-green-400 to-blue-500 rounded-lg flex items-center justify-center mr-3"},Qe={class:"text-white text-lg"},Xe={class:"font-medium text-gray-900 dark:text-white group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors"},Ye={class:"text-xs text-gray-500 dark:text-gray-400 capitalize"},et=["onClick"],tt={class:"flex items-center justify-between text-sm"},at={class:"text-green-600 dark:text-green-400 font-semibold"},rt={class:"text-xs text-gray-500 dark:text-gray-400"},st={key:1,class:"text-center py-8"},lt=t({__name:"FavoritesPanel",emits:["select-recipe","select-ingredient"],setup(t,{emit:n}){const d=n,c=a(null),m=a(!1),k=a("recipes"),f=a(""),h=r((()=>c.value?.recipes?c.value.recipes.reduce(((e,t)=>e+t.order_count),0):0)),w=r((()=>c.value?.categories||[])),_=r((()=>c.value?.ingredients?f.value?c.value.ingredients.filter((e=>e.category===f.value)):c.value.ingredients:[])),z=async(t,a)=>{try{await e.delete(`http://localhost:5001/api/favorites/${t}?user_id=web_user`),"recipe"===a?c.value.recipes=c.value.recipes.filter((e=>e.id!==t)):c.value.ingredients=c.value.ingredients.filter((e=>e.id!==t))}catch(r){}},C=e=>({breakfast:"☀️",lunch:"🍽️",dinner:"🌙",snacks:"🍓",specialty:"✨",superfoods:"⭐",traditional:"🥛",liquid_cup:"🥤",powder:"🥄",fruits_berries:"🍓",seeds_nuts:"🥜",spices_herbs:"🌿",bee_products:"🍯",detox:"🌊"}[e]||"🔹"),j=e=>({breakfast:"Śniadania",lunch:"Obiady",dinner:"Kolacje",snacks:"Przekąski",specialty:"Specjalistyczne",superfoods:"Superfoods",traditional:"Tradycyjne",liquid_cup:"Płynne kubeczki",powder:"Proszki",fruits_berries:"Owoce",seeds_nuts:"Nasiona",spices_herbs:"Przyprawy",bee_products:"Produkty pszczele",detox:"Detoks"}[e]||e),P=e=>{const t=new Date(e),a=new Date,r=Math.abs(a.getTime()-t.getTime()),s=Math.ceil(r/864e5);return 1===s?"wczoraj":2===s?"2 dni temu":s<7?`${s} dni temu`:s<30?`${Math.floor(s/7)} tygodni temu`:t.toLocaleDateString("pl-PL")};return b((()=>{(async()=>{try{m.value=!0;const t=await e.get("http://localhost:5001/api/favorites?user_id=web_user");"success"===t.data.status&&(c.value=t.data.data)}catch(t){c.value={recipes:[{id:"energetic_morning",name:"Energetyczny Start Dnia",category:"breakfast",price:16.6,health_score:94,last_ordered:"2024-06-10",order_count:12}],ingredients:[{id:"spirulina_powder",name:"Spirulina Powder BIO",category:"superfoods",price:4.5,usage_count:18}],categories:[{name:"breakfast",count:1},{name:"superfoods",count:1}]}}finally{m.value=!1}})()})),(e,t)=>(l(),s("div",ge,[i("div",xe,[i("div",ye,[t[3]||(t[3]=u('<div class="flex items-center"><div class="w-8 h-8 bg-red-100 dark:bg-red-900 rounded-lg flex items-center justify-center mr-3"><svg class="w-4 h-4 text-red-600 dark:text-red-400" fill="currentColor" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg></div><div><h3 class="text-lg font-semibold text-gray-900 dark:text-white">⭐ Ulubione</h3><p class="text-sm text-gray-500 dark:text-gray-400">Twoje ulubione przepisy i składniki</p></div></div>',1)),i("div",ve,[i("button",{onClick:t[0]||(t[0]=e=>k.value="recipes"),class:x(["px-3 py-1 text-sm rounded-md transition-colors","recipes"===k.value?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Przepisy ",2),i("button",{onClick:t[1]||(t[1]=e=>k.value="ingredients"),class:x(["px-3 py-1 text-sm rounded-md transition-colors","ingredients"===k.value?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Składniki ",2)])]),i("div",be,[i("div",me,[i("div",ke,y(c.value?.recipes?.length||0),1),t[4]||(t[4]=i("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Przepisy",-1))]),i("div",fe,[i("div",he,y(c.value?.ingredients?.length||0),1),t[5]||(t[5]=i("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Składniki",-1))]),i("div",we,[i("div",_e,y(h.value),1),t[6]||(t[6]=i("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Zamówienia",-1))])])]),i("div",ze,[m.value?(l(),s("div",Ce,[(l(),s(p,null,g(3,(e=>i("div",{key:e,class:"animate-pulse"},t[7]||(t[7]=[u('<div class="flex items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"><div class="w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg mr-3"></div><div class="flex-1 space-y-2"><div class="h-4 bg-gray-200 dark:bg-gray-600 rounded w-3/4"></div><div class="h-3 bg-gray-200 dark:bg-gray-600 rounded w-1/2"></div></div></div>',1)])))),64))])):"recipes"===k.value?(l(),s("div",je,[c.value?.recipes?.length?(l(),s("div",Pe,[(l(!0),s(p,null,g(c.value.recipes,(e=>(l(),s("div",{key:e.id,class:"group bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:shadow-md transition-all duration-200 cursor-pointer border border-gray-200 dark:border-gray-600",onClick:t=>(e=>{d("select-recipe",e)})(e)},[i("div",Se,[i("div",Be,[i("div",Ie,[i("span",Ne,y(C(e.category)),1)]),i("div",null,[i("h4",Oe,y(e.name),1),i("p",Me,y(e.category),1)])]),i("button",{onClick:v((t=>z(e.id,"recipe")),["stop"]),class:"opacity-0 group-hover:opacity-100 p-1 text-red-400 hover:text-red-600 transition-all"},t[8]||(t[8]=[i("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[i("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),8,$e)]),i("div",Ke,[i("div",De,[i("span",Fe,y(e.price.toFixed(2))+" PLN",1),i("span",We," Health "+y(e.health_score),1)]),i("div",Ae," Zamówiono "+y(e.order_count)+" razy ",1)]),i("div",Ze," Ostatnio: "+y(P(e.last_ordered)),1)],8,Le)))),128))])):(l(),s("div",Ee,t[9]||(t[9]=[u('<div class="w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg></div><p class="text-gray-500 dark:text-gray-400 text-sm">Brak ulubionych przepisów</p><p class="text-gray-400 dark:text-gray-500 text-xs mt-1">Kliknij ⭐ przy przepisie aby dodać do ulubionych</p>',3)])))])):"ingredients"===k.value?(l(),s("div",Te,[i("div",Ve,[i("button",{onClick:t[2]||(t[2]=e=>f.value=""),class:x(["px-3 py-1 text-xs rounded-full border transition-colors",""===f.value?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 border-purple-300 dark:border-purple-600":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600"])}," Wszystkie ",2),(l(!0),s(p,null,g(w.value,(e=>(l(),s("button",{key:e.name,onClick:t=>f.value=e.name,class:x(["px-3 py-1 text-xs rounded-full border transition-colors",f.value===e.name?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 border-purple-300 dark:border-purple-600":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600"])},y(j(e.name))+" ("+y(e.count)+") ",11,Re)))),128))]),_.value?.length?(l(),s("div",Ue,[(l(!0),s(p,null,g(_.value,(e=>(l(),s("div",{key:e.id,class:"group bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:shadow-md transition-all duration-200 cursor-pointer border border-gray-200 dark:border-gray-600",onClick:t=>(e=>{d("select-ingredient",e)})(e)},[i("div",Ge,[i("div",Je,[i("div",He,[i("span",Qe,y(C(e.category)),1)]),i("div",null,[i("h4",Xe,y(e.name),1),i("p",Ye,y(j(e.category)),1)])]),i("button",{onClick:v((t=>z(e.id,"ingredient")),["stop"]),class:"opacity-0 group-hover:opacity-100 p-1 text-red-400 hover:text-red-600 transition-all"},t[10]||(t[10]=[i("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[i("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),8,et)]),i("div",tt,[i("span",at,y(e.price.toFixed(2))+" PLN",1),i("span",rt," Użyto "+y(e.usage_count)+" razy ",1)])],8,qe)))),128))])):(l(),s("div",st,t[11]||(t[11]=[u('<div class="w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg></div><p class="text-gray-500 dark:text-gray-400 text-sm">Brak ulubionych składników</p><p class="text-gray-400 dark:text-gray-500 text-xs mt-1">Dodaj składniki do ulubionych podczas tworzenia kompozycji</p>',3)])))])):o("",!0)])]))}}),it={class:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-8"},ot={class:"lg:col-span-2 space-y-4 lg:space-y-6"},nt={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},dt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-4"},ct={class:"sm:col-span-2 lg:col-span-2"},ut={class:"relative"},pt={class:"mt-4 lg:mt-6"},gt={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-2 lg:gap-3"},xt=["onClick"],yt={class:"space-y-4 lg:space-y-6"},vt={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},bt={class:"flex flex-wrap gap-2 mb-4 lg:mb-6"},mt=["onClick"],kt={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 lg:gap-3"},ft=["onClick"],ht={class:"text-center"},wt={class:"text-2xl lg:text-3xl mb-2"},_t={class:"text-xs lg:text-sm font-medium text-gray-900 mb-1 line-clamp-2"},zt={class:"text-xs text-purple-600 font-bold"},Ct={class:"text-xs text-gray-500 mt-1"},jt={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},Pt={class:"flex flex-wrap gap-2 mb-4 lg:mb-6"},Lt=["onClick"],St={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 lg:gap-3"},Bt=["onClick"],It={key:0,class:"absolute -top-2 -right-2 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold"},Nt={class:"text-center"},Ot={class:"text-2xl lg:text-3xl mb-2"},Mt={class:"text-xs lg:text-sm font-medium text-gray-900 mb-1 line-clamp-2"},$t={class:"text-xs text-blue-600 font-bold"},Kt={class:"flex flex-wrap justify-center gap-1 mt-1"},Dt={class:"lg:col-span-1"},Ft={class:"lg:sticky lg:top-6 space-y-4 lg:space-y-6"},Wt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 lg:p-6"},At={class:"space-y-4"},Zt={key:0,class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3"},Et={class:"flex items-center justify-between"},Tt={class:"text-sm font-medium text-gray-900 dark:text-white"},Vt={class:"text-sm text-blue-600 dark:text-blue-400"},Rt={key:1,class:"text-sm text-gray-500 dark:text-gray-400 text-center p-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg"},Ut={class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},qt={key:0,class:"space-y-2"},Gt={class:"text-sm font-medium text-gray-900 dark:text-white"},Jt={class:"flex items-center space-x-2"},Ht={class:"text-sm text-green-600 dark:text-green-400"},Qt=["onClick"],Xt={key:1,class:"text-sm text-gray-500 dark:text-gray-400 text-center p-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg"},Yt={class:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg p-4"},ea={class:"space-y-2"},ta={class:"flex justify-between text-sm"},aa={class:"font-semibold text-purple-600 dark:text-purple-400"},ra={class:"flex justify-between text-sm"},sa={class:"font-semibold text-gray-900 dark:text-white"},la={class:"flex justify-between text-sm"},ia={class:"font-semibold text-gray-900 dark:text-white"},oa={key:0,class:"flex flex-wrap gap-1 mt-3"},na={class:"space-y-2"},da=["disabled"],ca=["disabled"],ua=w(t({__name:"CustomComposition",props:{savedCompositions:{}},emits:["update:saved-compositions"],setup(t,{emit:u}){const v=t,f=u,h=a([]),w=a([]);a({});const z=a(!1),C=a(""),j=a(""),P=a([]),L=a("traditional"),S=a("superfoods"),B=a(null),I=a([]),N=a(""),O=[{key:"vegan",label:"🌱 Vegan"},{key:"protein",label:"💪 Białko"},{key:"gluten_free",label:"🌾 Bezglutenowe"},{key:"natural",label:"🍃 Naturalne"},{key:"bio",label:"🌿 BIO"},{key:"superfood",label:"⭐ Superfood"}],M=a([{key:"traditional",name:"Tradycyjne",icon:"🥛",count:0},{key:"cups",name:"Kubeczki",icon:"🥤",count:0},{key:"powders",name:"Proszki",icon:"🥄",count:0}]),$=a([{key:"superfoods",name:"Superfoods",icon:"⭐",count:0},{key:"fruits",name:"Owoce",icon:"🍓",count:0},{key:"nuts_seeds",name:"Nasiona",icon:"🥜",count:0},{key:"spices",name:"Przyprawy",icon:"🌿",count:0},{key:"bee_products",name:"Produkty pszczele",icon:"🍯",count:0},{key:"detox",name:"Detoks",icon:"🌊",count:0}]),K=r((()=>h.value.filter((e=>{if(L.value&&e.category_key!==L.value)return!1;if(C.value&&!e.name.toLowerCase().includes(C.value.toLowerCase()))return!1;if(j.value){const[t,a]=j.value.split("-").map((e=>e.replace("+",""))),r=e.price;if(a){if(r<parseInt(t)||r>parseInt(a))return!1}else if(r<parseInt(t))return!1}return!(P.value.length>0)||P.value.some((t=>e.dietary_labels?.some((e=>e.toLowerCase().includes(t.toLowerCase())))||e.safety_labels?.some((e=>e.toLowerCase().includes(t.toLowerCase())))))})))),D=r((()=>w.value.filter((e=>{if(S.value&&e.category_key!==S.value)return!1;if(C.value&&!e.name.toLowerCase().includes(C.value.toLowerCase()))return!1;if(j.value){const[t,a]=j.value.split("-").map((e=>e.replace("+",""))),r=e.price;if(a){if(r<parseInt(t)||r>parseInt(a))return!1}else if(r<parseInt(t))return!1}return!(P.value.length>0)||P.value.some((t=>e.dietary_labels?.some((e=>e.toLowerCase().includes(t.toLowerCase())))||e.safety_labels?.some((e=>e.toLowerCase().includes(t.toLowerCase())))))})))),F=r((()=>{let e=0;return B.value&&(e+=B.value.price),e+=I.value.reduce(((e,t)=>e+t.price),0),e})),W=r((()=>{let e=0;return B.value&&(e+=B.value.calories||120),e+=I.value.reduce(((e,t)=>e+(t.calories||50)),0),e})),A=r((()=>{let e=0;return B.value&&(e+=B.value.protein||8),e+=I.value.reduce(((e,t)=>e+(t.protein||3)),0),Math.round(e)})),Z=r((()=>{const e=new Set;return B.value?.dietary_labels&&B.value.dietary_labels.forEach((t=>e.add(t))),I.value.forEach((t=>{t.dietary_labels&&t.dietary_labels.forEach((t=>e.add(t)))})),Array.from(e)})),E=r((()=>{const e=[];return B.value&&e.push(B.value),e.concat(I.value)})),T=r((()=>{const e=(new Date).getHours();return e<11?"breakfast":e<16?"lunch":e<20?"dinner":"snack"})),V=r((()=>B.value&&N.value.trim().length>0)),R=r((()=>B.value&&F.value>0)),U=e=>{(e=>{const t=I.value.findIndex((t=>t.id===e.id));t>-1&&I.value.splice(t,1)})(e)},q=()=>{B.value=null,I.value=[],N.value="",C.value="",j.value="",P.value=[]},G=async()=>{if(R.value)try{const t={type:"custom_composition",name:N.value,base:B.value,toppings:I.value,total_price:F.value,total_calories:W.value,nutrition:{protein:A.value,carbs:0,fat:0},dietary_labels:[...Z.value],custom_composition:!0},a=await e.post("http://localhost:5001/api/orders",t);if(!a.data.success)throw new Error(a.data.message||"Błąd tworzenia zamówienia");alert(`✅ Zamówienie "${N.value}" zostało utworzone!\n\n🎯 QR Code: ${a.data.qr_code}\n💰 Cena: ${F.value.toFixed(2)}zł`),v.savedCompositions.some((e=>e.name===N.value))||(()=>{if(!V.value)return;const e={id:Date.now().toString(),name:N.value,base:B.value,toppings:[...I.value],ingredients:[B.value,...I.value],price:F.value,calories:W.value,nutrition:{protein:A.value,carbs:0,fat:0},dietaryLabels:[...Z.value],savedAt:(new Date).toLocaleString("pl-PL")},t=localStorage.getItem("ikigai_compositions")||"[]",a=JSON.parse(t);a.unshift(e),a.length>20&&a.splice(20),localStorage.setItem("ikigai_compositions",JSON.stringify(a)),f("update:saved-compositions",a),alert(`✅ Kompozycja "${N.value}" została zapisana!`)})(),q()}catch(t){alert(`❌ Błąd tworzenia zamówienia: ${t.message}`)}},J=e=>{["traditional","liquid_cup","powder"].includes(e.category_key||e.category)?B.value?confirm(`Zastąpić obecną bazę "${B.value.name}" na "${e.name}"?`)&&(B.value=e):B.value=e:addTopping(e)},H=e=>{confirm(`Wczytać przepis "${e.name}"? To zastąpi obecną kompozycję.`)&&Q(e)},Q=async t=>{try{const a=await e.get(`http://localhost:5001/api/meal-recipes/${t.id}`);if("success"===a.data.status){const e=a.data.data;q(),N.value=e.name,e.base&&(B.value=e.base),e.toppings&&e.toppings.length>0&&(I.value=[...e.toppings])}}catch(a){}},X=e=>{confirm(`Wczytać ulubiony przepis "${e.name}"?`)&&ee(e)},Y=e=>{J(e)},ee=e=>{q(),N.value=e.name},te=async()=>{if(V.value)try{const t={user_id:"web_user",type:"recipe",item_id:N.value.toLowerCase().replace(/\s+/g,"_"),name:N.value,ingredients:E.value,price:F.value};await e.post("http://localhost:5001/api/favorites",t),alert("Kompozycja zapisana do ulubionych!")}catch(t){alert("Zapisano do ulubionych lokalnie")}};return b((()=>{(async()=>{try{z.value=!0;const t=await e.get("http://localhost:5001/api/ingredients/categories");if(t.data&&t.data.categories){const e=t.data.categories;h.value=[...e.bases?.traditional?.items||[],...e.bases?.liquid_cup?.items||[],...e.bases?.powder?.items||[]],w.value=[...e.toppings?.superfoods?.items||[],...e.toppings?.fruits_berries?.items||[],...e.toppings?.seeds_nuts?.items||[],...e.toppings?.spices_herbs?.items||[],...e.toppings?.bee_products?.items||[],...e.toppings?.detox_cleanse?.items||[]],h.value.forEach((e=>{e.category_key||("traditional"===e.type?e.category_key="traditional":"liquid_cup"===e.type?e.category_key="cups":"powder"===e.type&&(e.category_key="powders"))})),w.value.forEach((t=>{t.category_key||(e.toppings.superfoods?.items?.includes(t)?t.category_key="superfoods":e.toppings.fruits_berries?.items?.includes(t)?t.category_key="fruits":e.toppings.seeds_nuts?.items?.includes(t)?t.category_key="nuts_seeds":e.toppings.spices_herbs?.items?.includes(t)?t.category_key="spices":e.toppings.bee_products?.items?.includes(t)?t.category_key="bee_products":e.toppings.detox_cleanse?.items?.includes(t)&&(t.category_key="detox"))})),M.value.forEach((t=>{"traditional"===t.key?t.count=e.bases?.traditional?.count||0:"cups"===t.key?t.count=e.bases?.liquid_cup?.count||0:"powders"===t.key&&(t.count=e.bases?.powder?.count||0)})),$.value.forEach((t=>{"superfoods"===t.key?t.count=e.toppings?.superfoods?.count||0:"fruits"===t.key?t.count=e.toppings?.fruits_berries?.count||0:"nuts_seeds"===t.key?t.count=e.toppings?.seeds_nuts?.count||0:"spices"===t.key?t.count=e.toppings?.spices_herbs?.count||0:"bee_products"===t.key?t.count=e.toppings?.bee_products?.count||0:"detox"===t.key&&(t.count=e.toppings?.detox_cleanse?.count||0)}))}}catch(t){}finally{z.value=!1}})(),(()=>{try{const e=localStorage.getItem("ikigai_compositions");if(e){const t=JSON.parse(e);f("update:saved-compositions",t)}}catch(e){}})()})),(e,t)=>(l(),s("div",it,[i("div",ot,[i("div",nt,[i("div",dt,[i("div",ct,[i("div",ut,[n(i("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>C.value=e),type:"text",placeholder:"🔍 Szukaj składnika...",class:"w-full pl-10 pr-4 py-2.5 lg:py-3 text-sm lg:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[d,C.value]]),t[3]||(t[3]=i("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[i("span",{class:"text-gray-400 text-sm lg:text-base"},"🔍")],-1))])]),i("div",null,[n(i("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>j.value=e),class:"w-full px-3 lg:px-4 py-2.5 lg:py-3 text-sm lg:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},t[4]||(t[4]=[i("option",{value:""},"💰 Wszystkie ceny",-1),i("option",{value:"0-5"},"💰 0-5 PLN",-1),i("option",{value:"5-10"},"💰 5-10 PLN",-1),i("option",{value:"10+"},"💰 10+ PLN",-1)]),512),[[c,j.value]])])]),i("div",pt,[i("div",gt,[(l(),s(p,null,g(O,(e=>i("button",{key:e.key,onClick:t=>(e=>{const t=P.value.indexOf(e);t>-1?P.value.splice(t,1):P.value.push(e)})(e.key),class:x(["px-3 py-2 rounded-lg text-xs lg:text-sm font-medium transition-all duration-200",P.value.includes(e.key)?"bg-purple-100 text-purple-700 border border-purple-200":"bg-gray-100 text-gray-600 border border-gray-200 hover:bg-gray-200"])},y(e.label),11,xt))),64))])])]),i("div",yt,[i("div",vt,[t[5]||(t[5]=i("div",{class:"flex items-center mb-4 lg:mb-6"},[i("div",{class:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3"},[i("span",{class:"text-purple-600 font-bold text-sm lg:text-base"},"1")]),i("h2",{class:"text-lg lg:text-xl font-semibold text-gray-900"},"🥛 Wybierz bazę (wymagane)")],-1)),i("div",bt,[(l(!0),s(p,null,g(M.value,(e=>(l(),s("button",{key:e.key,onClick:t=>L.value=e.key,class:x(["px-3 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-all duration-200",L.value===e.key?"bg-purple-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},y(e.icon)+" "+y(e.name)+" ("+y(e.count)+") ",11,mt)))),128))]),i("div",kt,[(l(!0),s(p,null,g(K.value,(e=>(l(),s("div",{key:e.id,onClick:t=>(e=>{B.value=B.value?.id===e.id?null:e})(e),class:x(["p-3 lg:p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:scale-105",B.value?.id===e.id?"border-purple-500 bg-purple-50 shadow-md":"border-gray-200 hover:border-purple-300 hover:bg-gray-50"])},[i("div",ht,[i("div",wt,y(e.icon),1),i("div",_t,y(e.name),1),i("div",zt,y(e.price.toFixed(2))+"zł",1),i("div",Ct,y(e.volume),1)])],10,ft)))),128))])]),i("div",jt,[t[6]||(t[6]=i("div",{class:"flex items-center mb-4 lg:mb-6"},[i("div",{class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3"},[i("span",{class:"text-blue-600 font-bold text-sm lg:text-base"},"2")]),i("h2",{class:"text-lg lg:text-xl font-semibold text-gray-900"},"🌟 Dodaj składniki (opcjonalne)")],-1)),i("div",Pt,[(l(!0),s(p,null,g($.value,(e=>(l(),s("button",{key:e.key,onClick:t=>S.value=e.key,class:x(["px-3 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-all duration-200",S.value===e.key?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},y(e.icon)+" "+y(e.name)+" ("+y(e.count)+") ",11,Lt)))),128))]),i("div",St,[(l(!0),s(p,null,g(D.value,(e=>(l(),s("div",{key:e.id,onClick:t=>(e=>{const t=I.value.findIndex((t=>t.id===e.id));t>-1?I.value.splice(t,1):I.value.push(e)})(e),class:x(["p-3 lg:p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:scale-105 relative",I.value.some((t=>t.id===e.id))?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"])},[I.value.some((t=>t.id===e.id))?(l(),s("div",It,y(I.value.filter((t=>t.id===e.id)).length),1)):o("",!0),i("div",Nt,[i("div",Ot,y(e.icon),1),i("div",Mt,y(e.name),1),i("div",$t,y(e.price.toFixed(2))+"zł",1),i("div",Kt,[(l(!0),s(p,null,g(e.safety_labels?.slice(0,2),(e=>(l(),s("span",{key:e,class:"px-1 py-0.5 bg-green-100 text-green-600 rounded text-xs font-medium"},y(e),1)))),128))])])],10,Bt)))),128))])])])]),i("div",Dt,[i("div",Ft,[i("div",Wt,[t[14]||(t[14]=i("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center"},[i("span",{class:"mr-2"},"👁️"),k(" Live Preview ")],-1)),i("div",At,[i("div",null,[t[7]||(t[7]=i("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Baza:",-1)),B.value?(l(),s("div",Zt,[i("div",Et,[i("span",Tt,y(B.value.name),1),i("span",Vt,y(B.value.price.toFixed(2))+" PLN",1)])])):(l(),s("div",Rt," Wybierz bazę "))]),i("div",null,[i("h4",Ut," Dodatki ("+y(I.value.length)+"/5): ",1),I.value.length?(l(),s("div",qt,[(l(!0),s(p,null,g(I.value,(e=>(l(),s("div",{key:e.id,class:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 flex items-center justify-between"},[i("span",Gt,y(e.name),1),i("div",Jt,[i("span",Ht,y(e.price.toFixed(2))+" PLN",1),i("button",{onClick:t=>U(e),class:"text-red-400 hover:text-red-600"}," × ",8,Qt)])])))),128))])):(l(),s("div",Xt," Dodaj składniki "))]),i("div",Yt,[i("div",ea,[i("div",ta,[t[8]||(t[8]=i("span",{class:"text-gray-700 dark:text-gray-300"},"Cena całkowita:",-1)),i("span",aa,y(F.value.toFixed(2))+" PLN",1)]),i("div",ra,[t[9]||(t[9]=i("span",{class:"text-gray-700 dark:text-gray-300"},"Kalorie:",-1)),i("span",sa,"~"+y(W.value)+" kcal",1)]),i("div",la,[t[10]||(t[10]=i("span",{class:"text-gray-700 dark:text-gray-300"},"Białko:",-1)),i("span",ia,"~"+y(A.value)+"g",1)])]),Z.value.length?(l(),s("div",oa,[(l(!0),s(p,null,g(Z.value,(e=>(l(),s("span",{key:e,class:"px-2 py-1 bg-white dark:bg-gray-700 text-xs rounded-full text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600"},y(e),1)))),128))])):o("",!0)]),i("div",null,[t[11]||(t[11]=i("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Nazwa kompozycji: ",-1)),n(i("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>N.value=e),type:"text",placeholder:"Moja kompozycja...",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[d,N.value]])]),i("div",na,[i("button",{onClick:te,disabled:!V.value,class:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},t[12]||(t[12]=[i("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 24 24"},[i("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1),k(" Zapisz do ulubionych ")]),8,da),i("button",{onClick:G,disabled:!R.value,class:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[t[13]||(t[13]=i("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),k(" "+y(F.value.toFixed(2))+" PLN - Utwórz zamówienie ",1)],8,ca)])])]),m(_,{"selected-ingredients":E.value,context:T.value,onAddIngredient:J,onLoadRecipe:H},null,8,["selected-ingredients","context"]),m(lt,{onSelectRecipe:X,onSelectIngredient:Y})])])]))}}),[["__scopeId","data-v-2b37a452"]]),pa={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl"},ga={class:"flex items-center justify-between"},xa={class:"text-2xl font-bold text-gray-900"},ya={class:"p-6 space-y-6"},va={class:"grid grid-cols-4 gap-4"},ba={class:"text-center p-3 bg-purple-50 rounded-lg"},ma={class:"text-lg font-bold text-purple-600"},ka={class:"text-center p-3 bg-green-50 rounded-lg"},fa={class:"text-lg font-bold text-green-600"},ha={class:"text-center p-3 bg-blue-50 rounded-lg"},wa={class:"text-lg font-bold text-blue-600"},_a={class:"text-center p-3 bg-orange-50 rounded-lg"},za={class:"text-lg font-bold text-orange-600"},Ca={class:"text-gray-700 leading-relaxed"},ja={class:"grid grid-cols-4 gap-3"},Pa={class:"text-center p-3 bg-gray-50 rounded-lg"},La={class:"text-lg font-bold text-orange-600"},Sa={class:"text-center p-3 bg-gray-50 rounded-lg"},Ba={class:"text-lg font-bold text-blue-600"},Ia={class:"text-center p-3 bg-gray-50 rounded-lg"},Na={class:"text-lg font-bold text-green-600"},Oa={class:"text-center p-3 bg-gray-50 rounded-lg"},Ma={class:"text-lg font-bold text-yellow-600"},$a={class:"mb-4"},Ka={class:"bg-purple-50 rounded-lg p-3"},Da={class:"font-medium text-purple-700"},Fa={class:"text-sm font-medium text-gray-700 mb-2"},Wa={class:"grid grid-cols-2 gap-2"},Aa={class:"font-medium text-green-700"},Za={class:"flex flex-wrap gap-2"},Ea={key:0},Ta={class:"flex flex-wrap gap-2"},Va={key:1},Ra={class:"bg-gray-50 rounded-lg p-4"},Ua={class:"text-gray-700 leading-relaxed"},qa={class:"flex items-center space-x-3"},Ga={class:"text-sm text-gray-600"},Ja={class:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 rounded-b-2xl"},Ha={class:"flex items-center justify-between"},Qa={class:"text-sm text-gray-600"},Xa={class:"flex space-x-3"},Ya=w(t({__name:"RecipeModal",props:{recipe:{}},emits:["close","order"],setup(e,{emit:t}){const a=e,r=t,n=()=>{r("order",a.recipe)},d=e=>({easy:"Proste mieszanie składników",medium:"Wymaga kolejności dodawania",hard:"Precyzyjne proporcje i technika"}[e]||"");return(e,t)=>{return l(),s("div",{onClick:t[3]||(t[3]=t=>e.$emit("close")),class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4"},[i("div",{onClick:t[2]||(t[2]=v((()=>{}),["stop"])),class:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},[i("div",pa,[i("div",ga,[i("h2",xa,y(e.recipe.name),1),i("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors duration-200"}," ✕ ")])]),i("div",ya,[i("div",va,[i("div",ba,[i("div",ma,y(e.recipe.total_price.toFixed(2))+"zł",1),t[4]||(t[4]=i("div",{class:"text-xs text-gray-600"},"Cena",-1))]),i("div",ka,[i("div",fa,y(e.recipe.health_score)+"/100",1),t[5]||(t[5]=i("div",{class:"text-xs text-gray-600"},"Health Score",-1))]),i("div",ha,[i("div",wa,y(e.recipe.popularity)+"%",1),t[6]||(t[6]=i("div",{class:"text-xs text-gray-600"},"Popularność",-1))]),i("div",_a,[i("div",za,y(e.recipe.prep_time),1),t[7]||(t[7]=i("div",{class:"text-xs text-gray-600"},"Czas przygot.",-1))])]),i("div",null,[t[8]||(t[8]=i("h3",{class:"font-semibold text-gray-900 mb-2"},"📝 Opis",-1)),i("p",Ca,y(e.recipe.description),1)]),i("div",null,[t[13]||(t[13]=i("h3",{class:"font-semibold text-gray-900 mb-3"},"📊 Wartości odżywcze",-1)),i("div",ja,[i("div",Pa,[i("div",La,y(e.recipe.nutrition.kcal),1),t[9]||(t[9]=i("div",{class:"text-xs text-gray-600"},"kcal",-1))]),i("div",Sa,[i("div",Ba,y(e.recipe.nutrition.protein)+"g",1),t[10]||(t[10]=i("div",{class:"text-xs text-gray-600"},"białko",-1))]),i("div",Ia,[i("div",Na,y(e.recipe.nutrition.carbs)+"g",1),t[11]||(t[11]=i("div",{class:"text-xs text-gray-600"},"węglowodany",-1))]),i("div",Oa,[i("div",Ma,y(e.recipe.nutrition.fat)+"g",1),t[12]||(t[12]=i("div",{class:"text-xs text-gray-600"},"tłuszcze",-1))])])]),i("div",null,[t[15]||(t[15]=i("h3",{class:"font-semibold text-gray-900 mb-3"},"🥄 Składniki",-1)),i("div",$a,[t[14]||(t[14]=i("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Baza:",-1)),i("div",Ka,[i("span",Da,y((c=e.recipe.base,{protein_vanilla:"Protein Vanilla",spirulina_powder:"Spirulina Powder",coconut_water:"Woda Kokosowa Premium",golden_milk:"Złote Mleko Kurkumowe",matcha_premium:"Matcha Premium Grade A",kombucha_ginger:"Kombucha Imbirowa BIO",collagen_marine:"Kolagen Morski",aloe_vera_juice:"Sok z Aloesu Vera",yogurt_greek:"Jogurt Grecki",oatmeal_base:"Owsianka BIO",lemon_ginger_water:"Woda Cytrynowo-Imbirowa",smoothie_bowl:"Smoothie Bowl Base"}[c]||c)),1)])]),i("div",null,[i("h4",Fa,"Dodatki ("+y(e.recipe.toppings.length)+"):",1),i("div",Wa,[(l(!0),s(p,null,g(e.recipe.toppings,(e=>{return l(),s("div",{key:e,class:"bg-green-50 rounded-lg p-3 text-sm"},[i("span",Aa,y((t=e,{goji_berries:"Jagody Goji",maca_powder:"Maca Powder",nuts_almonds:"Migdały",honey_raw:"Miód Surowy",cinnamon_ceylon:"Cynamon Cejloński",chlorella_tablets:"Chlorella w tabletkach",barley_grass:"Trawa Jęczmienna",flax_seeds:"Siemię Lniane",acai_powder:"Acai Powder",coconut_flakes:"Płatki Kokosowe",lucuma_powder:"Lucuma Powder",banana_sliced:"Plasterki Banana",bee_pollen:"Pyłek Pszczeli",ashwagandha_powder:"Ashwagandha Powder",turmeric_powder:"Kurkuma BIO",ginger_dried:"Imbir Kandyzowany",mct_oil:"MCT Oil",moringa_powder:"Moringa Powder",propolis_powder:"Propolis Powder",pumpkin_seeds:"Pestki Dyni",sunflower_seeds:"Nasiona Słonecznika",chia_seeds:"Nasiona Chia",hemp_hearts:"Konopie Hearts",cacao_nibs:"Ziarna Kakao",activated_charcoal:"Węgiel Aktywny",baobab_powder:"Baobab Powder",mulberries_white:"Morwa Biała"}[t]||t)),1)]);var t})),128))])])]),i("div",null,[t[16]||(t[16]=i("h3",{class:"font-semibold text-gray-900 mb-3"},"💚 Korzyści zdrowotne",-1)),i("div",Za,[(l(!0),s(p,null,g(e.recipe.health_benefits,(e=>(l(),s("span",{key:e,class:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium"},y(e),1)))),128))])]),e.recipe.best_for?(l(),s("div",Ea,[t[17]||(t[17]=i("h3",{class:"font-semibold text-gray-900 mb-3"},"🎯 Idealne dla",-1)),i("div",Ta,[(l(!0),s(p,null,g(e.recipe.best_for,(e=>(l(),s("span",{key:e,class:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium"},y(e),1)))),128))])])):o("",!0),e.recipe.preparation?(l(),s("div",Va,[t[18]||(t[18]=i("h3",{class:"font-semibold text-gray-900 mb-3"},"👨‍🍳 Instrukcja przygotowania",-1)),i("div",Ra,[i("p",Ua,y(e.recipe.preparation),1)])])):o("",!0),i("div",null,[t[19]||(t[19]=i("h3",{class:"font-semibold text-gray-900 mb-3"},"📈 Poziom trudności",-1)),i("div",qa,[i("div",{class:x(["px-3 py-1 rounded-full text-sm font-medium","easy"===e.recipe.difficulty?"bg-green-100 text-green-700":"medium"===e.recipe.difficulty?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"])},y((r=e.recipe.difficulty,{easy:"🟢 Łatwy",medium:"🟡 Średni",hard:"🔴 Trudny"}[r]||r)),3),i("span",Ga,y(d(e.recipe.difficulty)),1)])])]),i("div",Ja,[i("div",Ha,[i("div",Qa," 🏷️ "+y((a=e.recipe.category,{breakfast:"Śniadania",lunch:"Obiady",dinner:"Kolacje",snacks:"Przekąski",specialty:"Specjalistyczne"}[a]||"Przepisy"))+" • "+y(e.recipe.prep_time),1),i("div",Xa,[i("button",{onClick:t[1]||(t[1]=t=>e.$emit("close")),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors duration-200"}," Zamknij "),i("button",{onClick:n,class:"px-6 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200"}," 🛒 Zamów za "+y(e.recipe.total_price.toFixed(2))+"zł ",1)])])])])]);var a,r,c}}}),[["__scopeId","data-v-7865c290"]]),er={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},tr={class:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 mb-6 lg:mb-8"},ar={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},rr={class:"flex items-center justify-between h-16 lg:h-20"},sr={class:"flex items-center"},lr={class:"hidden sm:flex items-center space-x-4 lg:space-x-6"},ir={class:"text-center"},or={class:"text-lg lg:text-xl font-bold text-purple-600"},nr={class:"text-center"},dr={class:"text-lg lg:text-xl font-bold text-blue-600"},cr={class:"text-center"},ur={class:"text-lg lg:text-xl font-bold text-green-600"},pr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-6 lg:mb-8"},gr={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-2"},xr={class:"grid grid-cols-2 gap-2"},yr={key:0,class:"ml-2 px-2 py-1 bg-white rounded-full text-xs lg:text-sm"},vr={key:0,class:"ml-2 px-2 py-1 bg-white rounded-full text-xs lg:text-sm"},br={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8"},mr={key:0},kr={key:1},fr={class:"flex items-center"},hr={class:"text-xl mr-2"},wr={class:"font-medium"},_r=w(t({__name:"RecipeCreator",emits:["navigate"],setup(t){const n=a("recipes"),d=a([]),c=a({}),u=a(!1),p=a(null),g=a([]),v=f({show:!1,type:"success",message:""}),k=r((()=>({ready:d.value.length,ingredients:41,categories:Object.keys(c.value).length}))),w=(e,t)=>{v.type=e,v.message=t,v.show=!0,setTimeout((()=>{v.show=!1}),4e3)},_=e=>{p.value=e},z=async t=>{try{const a={type:"meal_recipe",recipe_id:t.id,name:t.name,total_price:t.total_price,total_calories:t.calories,base:t.base,toppings:t.toppings,custom_composition:!1},r=await e.post("http://localhost:5001/api/orders",a);if(!r.data.success)throw new Error(r.data.message||"Błąd tworzenia zamówienia");w("success",`Zamówienie "${t.name}" zostało utworzone! QR: ${r.data.qr_code}`),p.value=null}catch(a){w("error",`Błąd tworzenia zamówienia: ${a.message}`)}};return b((()=>{(async()=>{try{u.value=!0;const[t,a]=await Promise.all([e.get("http://localhost:5001/api/meal-recipes"),e.get("http://localhost:5001/api/meal-recipes/categories")]);if(d.value=t.data.data||[],"success"===a.data.status&&Array.isArray(a.data.data)){const e=a.data.data;c.value={},e.forEach((e=>{c.value[e.id]={name:e.name,count:e.count||1,price_range:{min:15,max:25}}}))}else c.value={}}catch(t){w("error","Błąd ładowania przepisów")}finally{u.value=!1}})(),(()=>{try{const e=localStorage.getItem("ikigai_compositions");e&&(g.value=JSON.parse(e))}catch(e){}})()})),(e,t)=>(l(),s("div",er,[i("div",tr,[i("div",ar,[i("div",rr,[i("div",sr,[i("button",{onClick:t[0]||(t[0]=t=>e.$emit("navigate","dashboard")),class:"mr-4 p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700"},t[5]||(t[5]=[i("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),t[6]||(t[6]=i("h1",{class:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white"},"🍽️ Kreator Przepisów IKIGAI",-1))]),i("div",lr,[i("div",ir,[i("div",or,y(k.value.ready),1),t[7]||(t[7]=i("div",{class:"text-xs lg:text-sm text-gray-500"},"Gotowe przepisy",-1))]),i("div",nr,[i("div",dr,y(k.value.ingredients),1),t[8]||(t[8]=i("div",{class:"text-xs lg:text-sm text-gray-500"},"Składniki",-1))]),i("div",cr,[i("div",ur,y(g.value.length),1),t[9]||(t[9]=i("div",{class:"text-xs lg:text-sm text-gray-500"},"Zapisane",-1))])])])])]),i("div",pr,[i("div",gr,[i("div",xr,[i("button",{onClick:t[1]||(t[1]=e=>n.value="recipes"),class:x(["flex items-center justify-center py-3 lg:py-4 px-4 lg:px-6 rounded-lg font-medium text-sm lg:text-base transition-all duration-200","recipes"===n.value?"bg-purple-100 text-purple-700 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700"])},[t[10]||(t[10]=i("span",{class:"text-xl lg:text-2xl mr-2 lg:mr-3"},"🍽️",-1)),t[11]||(t[11]=i("span",null,"Gotowe Przepisy",-1)),k.value.ready>0?(l(),s("span",yr,y(k.value.ready),1)):o("",!0)],2),i("button",{onClick:t[2]||(t[2]=e=>n.value="custom"),class:x(["flex items-center justify-center py-3 lg:py-4 px-4 lg:px-6 rounded-lg font-medium text-sm lg:text-base transition-all duration-200","custom"===n.value?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700"])},[t[12]||(t[12]=i("span",{class:"text-xl lg:text-2xl mr-2 lg:mr-3"},"🎨",-1)),t[13]||(t[13]=i("span",null,"Własna Kompozycja",-1)),g.value.length>0?(l(),s("span",vr,y(g.value.length),1)):o("",!0)],2)])])]),i("div",br,["recipes"===n.value?(l(),s("div",mr,[m(pe,{recipes:d.value,categories:c.value,loading:u.value,onSelectRecipe:_,onOrderRecipe:z},null,8,["recipes","categories","loading"])])):o("",!0),"custom"===n.value?(l(),s("div",kr,[m(ua,{"saved-compositions":g.value,"onUpdate:savedCompositions":t[3]||(t[3]=e=>g.value=e)},null,8,["saved-compositions"])])):o("",!0)]),p.value?(l(),h(Ya,{key:0,recipe:p.value,onClose:t[4]||(t[4]=e=>p.value=null),onOrder:z},null,8,["recipe"])):o("",!0),v.show?(l(),s("div",{key:1,class:x(["fixed top-4 right-4 z-50 p-4 rounded-xl shadow-lg transition-all duration-300","success"===v.type?"bg-green-500 text-white":"bg-red-500 text-white"])},[i("div",fr,[i("span",hr,y("success"===v.type?"✅":"❌"),1),i("span",wr,y(v.message),1)])],2)):o("",!0)]))}}),[["__scopeId","data-v-b7cea0a1"]]);export{_r as default};
