import{d as a,r as e,p as t,o as r,c as s,b as l,e as d,j as o,f as n,m as i,z as c,B as g,F as u,l as v,q as x,g as b,k as p}from"./vendor-vue-21xXbNRb.js";import{_ as m}from"./feature-analytics-Bl__O72l.js";import"./vendor-http-CtpuQClY.js";import"./vendor-charts-m3kAu5OU.js";const y={class:"max-w-7xl mx-auto p-6 space-y-6"},f={class:"flex items-center text-sm text-gray-600 dark:text-gray-400 mb-4"},k={class:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-8 text-white"},h={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6"},w={class:"text-center bg-green-600 bg-opacity-50 rounded-lg p-4"},j={class:"text-2xl font-bold"},z={class:"text-center bg-green-600 bg-opacity-50 rounded-lg p-4"},M={class:"text-2xl font-bold"},I={class:"text-center bg-green-600 bg-opacity-50 rounded-lg p-4"},_={class:"text-2xl font-bold"},C={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},$={class:"p-6"},A={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},S={class:"lg:col-span-1"},P={class:"space-y-4"},K={class:"space-y-3"},W=["disabled"],G={key:0},O={key:1},Z={key:2},q={class:"lg:col-span-2"},D={class:"relative bg-gradient-to-br from-green-100 to-blue-100 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg h-80 border border-gray-200 dark:border-gray-600"},F=["onClick","title"],L={class:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded whitespace-nowrap"},T={key:0,class:"absolute inset-0 bg-green-500 rounded-full animate-ping opacity-30"},V={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},U={class:"p-6"},B={class:"overflow-x-auto"},J={class:"flex gap-4 pb-4",style:{"min-width":"max-content"}},N=["onClick"],Q={class:"flex items-center justify-between mb-4"},R={class:"font-semibold text-gray-900 dark:text-white text-lg"},E={class:"text-sm text-gray-600 dark:text-gray-400 mb-3"},H={class:"text-xs text-gray-500 dark:text-gray-500"},X={class:"mt-4 flex items-center justify-between"},Y={class:"text-xs text-gray-500 dark:text-gray-500"},aa={key:0,class:"mt-2 text-xs text-blue-600 dark:text-blue-400"},ea={key:0,class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},ta={class:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center"},ra={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},sa={class:"space-y-2 text-sm text-gray-600 dark:text-gray-400"},la={class:"space-y-2 text-sm"},da={class:"flex items-center"},oa={class:"text-gray-600 dark:text-gray-400"},na={class:"text-gray-600 dark:text-gray-400"},ia={class:"space-y-1"},ca={class:"flex flex-wrap gap-3 mt-6"},ga=m(a({__name:"VendingMap",emits:["navigate"],setup(a){const m=e([]),ga=e(null),ua=e(null),va=e(!1),xa=e(!1),ba=e("all"),pa=e("all"),ma=t((()=>{let a=m.value;return"all"!==ba.value&&(a=a.filter((a=>a.status===ba.value))),"available"===pa.value?a=a.filter((a=>a.stock_level>0)):"low"===pa.value&&(a=a.filter((a=>a.stock_level<20))),a})),ya=t((()=>m.value.filter((a=>"online"===a.status)).length)),fa=t((()=>m.value.reduce(((a,e)=>a+e.stock_level),0))),ka=a=>{ga.value=a},ha=()=>{navigator.geolocation&&(va.value=!0,navigator.geolocation.getCurrentPosition((a=>{ua.value={lat:a.coords.latitude,lng:a.coords.longitude},va.value=!1}),(a=>{ua.value={lat:52.2297,lng:21.0122},va.value=!1})))},wa=a=>{if(!ua.value)return 0;const e=(a.lat-ua.value.lat)*Math.PI/180,t=(a.lng-ua.value.lng)*Math.PI/180,r=Math.sin(e/2)*Math.sin(e/2)+Math.cos(ua.value.lat*Math.PI/180)*Math.cos(a.lat*Math.PI/180)*Math.sin(t/2)*Math.sin(t/2);return(6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))).toFixed(1)},ja=a=>{const e=(a=>{const e=52.35,t=52.1,r=21.2,s=20.85,l=(a.lat-t)/(e-t)*100,d=(a.lng-s)/(r-s)*100,o=100-l;return{top:`${Math.max(5,Math.min(95,o))}%`,left:`${Math.max(5,Math.min(95,d))}%`}})(a);return{top:e.top,left:e.left}},za=()=>{const a=(()=>{if(!ua.value)return{top:"50%",left:"50%"};const a=52.35,e=52.1,t=21.2,r=20.85,s=(ua.value.lat-e)/(a-e)*100,l=(ua.value.lng-r)/(t-r)*100,d=100-s;return{top:`${Math.max(5,Math.min(95,d))}%`,left:`${Math.max(5,Math.min(95,l))}%`}})();return{top:a.top,left:a.left}};return r((async()=>{await(async()=>{try{const a=await fetch("http://localhost:5001/api/vending-machines"),e=await a.json();"success"===e.status&&(m.value=e.data)}catch(a){}})(),setTimeout((()=>{xa.value=!0}),1500),m.value.length>0&&(ga.value=m.value[0])})),(a,e)=>(l(),s("div",y,[d("div",f,[d("button",{onClick:e[0]||(e[0]=e=>a.$emit("navigate","dashboard")),class:"hover:text-purple-600 dark:hover:text-purple-400 transition-colors duration-200"}," 🏠 Dashboard "),e[6]||(e[6]=d("span",{class:"mx-2"},"/",-1)),e[7]||(e[7]=d("span",{class:"text-purple-600 dark:text-purple-400 font-medium"},"🗺️ Mapa Automatów",-1))]),d("div",k,[e[11]||(e[11]=n('<div class="flex items-center mb-4" data-v-1c8f1c2a><div class="w-12 h-12 mr-4 bg-white rounded-full flex items-center justify-center" data-v-1c8f1c2a><span class="text-2xl" data-v-1c8f1c2a>🗺️</span></div><div data-v-1c8f1c2a><h1 class="text-3xl font-bold" data-v-1c8f1c2a>Mapa Automatów IKIGAI</h1><p class="text-green-100 mt-2" data-v-1c8f1c2a>Znajdź najbliższy automat i zaplanuj swoją podróż po zdrowie</p></div></div>',1)),d("div",h,[d("div",w,[d("div",j,i(m.value.length),1),e[8]||(e[8]=d("div",{class:"text-sm text-green-100"},"Automaty IKIGAI",-1))]),d("div",z,[d("div",M,i(ya.value),1),e[9]||(e[9]=d("div",{class:"text-sm text-green-100"},"Aktywne teraz",-1))]),d("div",I,[d("div",_,i(fa.value),1),e[10]||(e[10]=d("div",{class:"text-sm text-green-100"},"Produkty dostępne",-1))])])]),d("div",C,[e[21]||(e[21]=d("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[d("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"🗺️ Mapa interaktywna"),d("p",{class:"text-gray-600 dark:text-gray-400"},"Znajdź najbliższy automat IKIGAI w Warszawie")],-1)),d("div",$,[d("div",A,[d("div",S,[d("div",P,[d("div",null,[e[16]||(e[16]=d("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"🔍 Filtry",-1)),d("div",K,[d("div",null,[e[13]||(e[13]=d("label",{class:"block text-xs text-gray-600 dark:text-gray-400 mb-1"},"Status",-1)),c(d("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>ba.value=a),class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},e[12]||(e[12]=[d("option",{value:"all"},"Wszystkie",-1),d("option",{value:"online"},"Online",-1),d("option",{value:"maintenance"},"Serwis",-1)]),512),[[g,ba.value]])]),d("div",null,[e[15]||(e[15]=d("label",{class:"block text-xs text-gray-600 dark:text-gray-400 mb-1"},"Stan magazynu",-1)),c(d("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>pa.value=a),class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},e[14]||(e[14]=[d("option",{value:"all"},"Wszystkie",-1),d("option",{value:"available"},"Dostępne produkty",-1),d("option",{value:"low"},"Niski stan",-1)]),512),[[g,pa.value]])]),d("button",{onClick:ha,disabled:va.value,class:"w-full mt-4 px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50"},[va.value?(l(),s("span",G,"📍 Lokalizuję...")):ua.value?(l(),s("span",O,"📍 Moja lokalizacja")):(l(),s("span",Z,"🔍 Znajdź mnie"))],8,W)])])])]),d("div",q,[d("div",D,[e[18]||(e[18]=d("div",{class:"absolute inset-0 flex items-center justify-center z-0"},[d("div",{class:"text-center opacity-50"},[d("div",{class:"text-2xl mb-2"},"🗺️"),d("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Warszawa")])],-1)),(l(!0),s(u,null,v(m.value,((a,e)=>(l(),s("div",{key:a.id,style:x(ja(a)),class:"absolute cursor-pointer transition-all duration-200 hover:scale-110 z-10",onClick:e=>ka(a),title:a.name},[d("div",{class:b(["w-8 h-8 rounded-full border-3 border-white shadow-lg flex items-center justify-center text-white font-bold text-lg relative","online"===a.status?"bg-green-500":"bg-red-500"])},[p(i("online"===a.status?"🏪":"🔧")+" ",1),d("div",L,i(a.name),1),"online"===a.status?(l(),s("div",T)):o("",!0)],2)],12,F)))),128)),ua.value?(l(),s("div",{key:0,style:x(za()),class:"absolute cursor-pointer z-10"},e[17]||(e[17]=[d("div",{class:"w-6 h-6 bg-blue-500 rounded-full border-2 border-white shadow-lg flex items-center justify-center relative"},[d("div",{class:"w-2 h-2 bg-white rounded-full"}),d("div",{class:"absolute inset-0 bg-blue-500 rounded-full animate-ping opacity-40"}),d("div",{class:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white text-xs px-2 py-1 rounded whitespace-nowrap"}," Twoja lokalizacja ")],-1)]),4)):o("",!0),e[19]||(e[19]=d("div",{class:"absolute top-4 right-4 flex flex-col space-y-2"},[d("button",{class:"w-8 h-8 bg-white dark:bg-gray-800 rounded border border-gray-300 dark:border-gray-600 flex items-center justify-center text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"},"📍"),d("button",{class:"w-8 h-8 bg-white dark:bg-gray-800 rounded border border-gray-300 dark:border-gray-600 flex items-center justify-center text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"},"🏠")],-1))])]),e[20]||(e[20]=n('<div class="lg:col-span-1" data-v-1c8f1c2a><div class="space-y-4" data-v-1c8f1c2a><div data-v-1c8f1c2a><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-v-1c8f1c2a>🗺️ Wszystkie automaty</label><div class="text-xs text-gray-600 dark:text-gray-400 mb-3" data-v-1c8f1c2a>Warszawa</div><div class="space-y-3 text-sm" data-v-1c8f1c2a><div class="flex items-center space-x-2" data-v-1c8f1c2a><div class="w-3 h-3 bg-green-500 rounded-full" data-v-1c8f1c2a></div><span class="text-gray-700 dark:text-gray-300" data-v-1c8f1c2a>Automat online</span></div><div class="flex items-center space-x-2" data-v-1c8f1c2a><div class="w-3 h-3 bg-red-500 rounded-full" data-v-1c8f1c2a></div><span class="text-gray-700 dark:text-gray-300" data-v-1c8f1c2a>Automat w serwisie</span></div><div class="flex items-center space-x-2" data-v-1c8f1c2a><div class="w-3 h-3 bg-blue-500 rounded-full" data-v-1c8f1c2a></div><span class="text-gray-700 dark:text-gray-300" data-v-1c8f1c2a>Twoja lokalizacja</span></div></div></div></div></div>',1))])])]),d("div",V,[e[22]||(e[22]=d("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[d("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"🏪 Szczegóły automatów")],-1)),d("div",U,[d("div",B,[d("div",J,[(l(!0),s(u,null,v(ma.value,(a=>(l(),s("div",{key:a.id,onClick:e=>ka(a),class:b(["cursor-pointer p-6 border border-gray-200 dark:border-gray-700 rounded-lg min-w-80 transition-all duration-200",ga.value?.id===a.id?"border-green-500 bg-green-50 dark:bg-green-900/20":"hover:border-green-300 hover:bg-gray-50 dark:hover:bg-gray-700","online"===a.status?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-700":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-700"])},[d("div",Q,[d("h3",R,i(a.name),1),d("span",{class:b(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium","online"===a.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"])},i("online"===a.status?"🟢 Online":"🔧 Serwis"),3)]),d("p",E,i(a.location),1),d("div",H,i(a.address),1),d("div",X,[d("div",{class:b(["text-sm font-medium","online"===a.status?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])}," Stock: "+i(a.stock_level)+"% ",3),d("div",Y,i(a.opening_hours),1)]),ua.value?(l(),s("div",aa," 📍 "+i(wa(a))+" km od Ciebie ",1)):o("",!0)],10,N)))),128))])])])]),ga.value?(l(),s("div",ea,[d("h3",ta,[e[23]||(e[23]=d("span",{class:"text-2xl mr-3"},"🏪",-1)),p(" "+i(ga.value.name)+" - Szczegóły ",1)]),d("div",ra,[d("div",null,[e[27]||(e[27]=d("h4",{class:"font-semibold text-gray-900 dark:text-white mb-3"},"📍 Lokalizacja",-1)),d("div",sa,[d("div",null,[e[24]||(e[24]=d("strong",null,"Miejsce:",-1)),p(" "+i(ga.value.location),1)]),d("div",null,[e[25]||(e[25]=d("strong",null,"Adres:",-1)),p(" "+i(ga.value.address),1)]),d("div",null,[e[26]||(e[26]=d("strong",null,"Godziny:",-1)),p(" "+i(ga.value.operating_hours),1)])])]),d("div",null,[e[30]||(e[30]=d("h4",{class:"font-semibold text-gray-900 dark:text-white mb-3"},"📊 Status",-1)),d("div",la,[d("div",da,[d("span",{class:b(["px-2 py-1 rounded-full text-xs font-medium mr-2","online"===ga.value.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"])},i("online"===ga.value.status?"🟢 Online":"🔴 Serwis"),3)]),d("div",oa,[e[28]||(e[28]=d("strong",null,"Magazyn:",-1)),p(" "+i(ga.value.stock_level)+"% dostępności ",1)]),d("div",na,[e[29]||(e[29]=d("strong",null,"Ostatnia konserwacja:",-1)),p(" "+i(ga.value.last_maintenance),1)])])]),d("div",null,[e[31]||(e[31]=d("h4",{class:"font-semibold text-gray-900 dark:text-white mb-3"},"🥤 Popularne produkty",-1)),d("div",ia,[(l(!0),s(u,null,v(ga.value.popular_items,(a=>(l(),s("div",{key:a,class:"text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"},i(a),1)))),128))])]),e[32]||(e[32]=n('<div data-v-1c8f1c2a><h4 class="font-semibold text-gray-900 dark:text-white mb-3" data-v-1c8f1c2a>💳 Płatność</h4><div class="space-y-1" data-v-1c8f1c2a><div class="text-sm text-gray-600 dark:text-gray-400 flex items-center" data-v-1c8f1c2a><span class="mr-2" data-v-1c8f1c2a>💳</span> Karta płatnicza </div><div class="text-sm text-gray-600 dark:text-gray-400 flex items-center" data-v-1c8f1c2a><span class="mr-2" data-v-1c8f1c2a>📱</span> Płatność mobilna </div><div class="text-sm text-gray-600 dark:text-gray-400 flex items-center" data-v-1c8f1c2a><span class="mr-2" data-v-1c8f1c2a>📱</span> Kod QR </div></div></div>',1))]),d("div",ca,[d("button",{onClick:e[3]||(e[3]=a=>(a=>{const e=`https://www.google.com/maps/dir/?api=1&destination=${a.lat},${a.lng}`;window.open(e,"_blank")})(ga.value)),class:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition-colors duration-200 flex items-center"},e[33]||(e[33]=[d("span",{class:"mr-2"},"🧭",-1),p(" Jak dojechać ")])),d("button",{onClick:e[4]||(e[4]=a=>{return e=ga.value,void alert(`Kontakt dla automatu ${e.name}\nID: ${e.id}\nLokalizacja: ${e.location}`);var e}),class:"bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-lg transition-colors duration-200 flex items-center"},e[34]||(e[34]=[d("span",{class:"mr-2"},"📞",-1),p(" Zgłoś problem ")])),d("button",{onClick:e[5]||(e[5]=e=>a.$emit("navigate","mixer")),class:"w-full bg-purple-500 hover:bg-purple-600 text-white py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center"},e[35]||(e[35]=[d("span",{class:"mr-2"},"🥣",-1),p(" Skomponuj bowl ")]))])])):o("",!0)]))}}),[["__scopeId","data-v-1c8f1c2a"]]);export{ga as default};
